<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-fullscreen" />
    <title>XV Renata — Wonderland AR ✨</title>

    <!-- A-Frame 1.4.2 -->
    <script src="https://cdn.jsdelivr.net/npm/aframe@1.4.2/dist/aframe-master.min.js"></script>

    <!-- MindAR Face -->
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-face-aframe.prod.js"></script>

    <!-- html2canvas para captura completa -->
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

    <!-- Google Fonts - Alice in Wonderland style fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Creepster&family=New+Rocker&family=Nosifer&family=Butcherman&family=Eater&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <!-- Marco decorativo superior -->
    <div class="decorative-frame frame-top">
      <div class="frame-corner frame-tl">✦</div>
      <div class="frame-corner frame-tr">✦</div>
      <div class="frame-line"></div>
    </div>

    <!-- Marco decorativo inferior -->
    <div class="decorative-frame frame-bottom">
      <div class="frame-corner frame-bl">✦</div>
      <div class="frame-corner frame-br">✦</div>
      <div class="frame-line"></div>
    </div>

    <!-- Título estilo Alice in Wonderland -->
    <div class="title-overlay">
      <h1 class="title-main">
        <span class="word-xv">XV</span>
        <span class="word-renata">Renata</span>
      </h1>
      <p class="title-sub">1 de Octubre 2027</p>
    </div>

    <!-- Logo/Subtítulo Alice in Wonderland -->
    <div class="wonderland-logo">
      <p class="wonderland-text">
        <span class="alice-word">Alice</span>
        <span class="in-word">in</span>
        <span class="wonderland-word">Wonderland</span>
      </p>
    </div>

    <!-- GATOS DE CHESHIRE - Múltiples con diferentes opacidades (efecto desvanecimiento) -->
    <div class="cheshire-cats-container">
      <!-- Gato principal -->
      <div class="cheshire-cat cheshire-main">
        <img src="images/gato.png" alt="Cheshire Cat" class="cheshire-img" />
      </div>

      <!-- Gato fantasma 1 (más transparente) -->
      <div class="cheshire-cat cheshire-ghost-1">
        <img src="images/gato.png" alt="Cheshire Cat Ghost" class="cheshire-img" />
      </div>

      <!-- Gato fantasma 2 (muy transparente) -->
      <div class="cheshire-cat cheshire-ghost-2">
        <img src="images/gato.png" alt="Cheshire Cat Ghost" class="cheshire-img" />
      </div>
    </div>

    <!-- Partículas mágicas alrededor del gato -->
    <div class="cat-particles">
      <div class="cat-particle cat-particle-1"></div>
      <div class="cat-particle cat-particle-2"></div>
      <div class="cat-particle cat-particle-3"></div>
      <div class="cat-particle cat-particle-4"></div>
      <div class="cat-particle cat-particle-5"></div>
      <div class="cat-particle cat-particle-6"></div>
    </div>

    <!-- Frase icónica -->
    <div class="wonderland-quote">
      <p>"We're all mad here"</p>
    </div>

    <!-- BOTÓN DE CAPTURA mejorado -->
    <button id="capture-btn" class="capture-button" aria-label="Tomar foto">
      <div class="capture-ring"></div>
      <div class="capture-ring-outer"></div>
      <svg
        width="32"
        height="32"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <circle cx="12" cy="12" r="10" />
        <circle cx="12" cy="12" r="3" />
      </svg>
    </button>

    <!-- Flash de captura -->
    <div id="flash" class="flash-overlay"></div>

    <!-- Notificación de descarga -->
    <div id="download-notification" class="download-notification">✨ ¡Foto capturada! ✨</div>

    <!-- Escena A-Frame -->
    <a-scene
      id="ar-scene"
      mindar-face="autoStart: true; filterMinCF: 0.001; filterBeta: 10"
      color-space="sRGB"
      renderer="colorManagement: true; physicallyCorrectLights: true; antialias: false; precision: highp; alpha: true"
      vr-mode-ui="enabled: false"
      device-orientation-permission-ui="enabled: false"
      embedded
      screenshot="width: 1920; height: 1080"
    >
      <a-camera
        active="true"
        position="0 0 0"
        look-controls="enabled: false"
        wasd-controls="enabled: false"
      ></a-camera>

      <!-- TODOS LOS ELEMENTOS EN UN SOLO ANCHOR CON COMPONENTE keep-visible -->
      <a-entity id="face-elements" mindar-face-target="anchorIndex: 10" keep-visible>
        <!-- CORONA DE REINA (Queen of Hearts / Alice) -->
        <a-entity position="0 0.35 -0.15" rotation="0 0 0" scale="1.6 1.6 1.6">
          <!-- Base de la corona -->
          <a-cylinder
            position="0 0 0"
            radius="0.32"
            height="0.08"
            color="#DAA520"
            material="shader: flat; metalness: 0.8"
          ></a-cylinder>

          <!-- Aro superior -->
          <a-torus
            position="0 0.04 0"
            radius="0.32"
            radius-tubular="0.02"
            color="#FFD700"
            material="shader: flat; metalness: 0.9"
          ></a-torus>

          <!-- Picos de la corona (5 picos) -->
          <a-cone
            position="0 0.15 0.32"
            radius-bottom="0.05"
            radius-top="0.01"
            height="0.18"
            color="#DAA520"
            material="shader: flat"
            rotation="0 0 0"
          ></a-cone>

          <a-cone
            position="0.3 0.15 0.1"
            radius-bottom="0.05"
            radius-top="0.01"
            height="0.18"
            color="#DAA520"
            material="shader: flat"
            rotation="0 70 0"
          ></a-cone>

          <a-cone
            position="-0.3 0.15 0.1"
            radius-bottom="0.05"
            radius-top="0.01"
            height="0.18"
            color="#DAA520"
            material="shader: flat"
            rotation="0 -70 0"
          ></a-cone>

          <a-cone
            position="0.2 0.15 -0.25"
            radius-bottom="0.05"
            radius-top="0.01"
            height="0.18"
            color="#DAA520"
            material="shader: flat"
            rotation="0 145 0"
          ></a-cone>

          <a-cone
            position="-0.2 0.15 -0.25"
            radius-bottom="0.05"
            radius-top="0.01"
            height="0.18"
            color="#DAA520"
            material="shader: flat"
            rotation="0 -145 0"
          ></a-cone>

          <!-- Gemas en los picos -->
          <a-sphere
            position="0 0.24 0.32"
            radius="0.03"
            color="#EC5B7E"
            material="shader: flat; metalness: 1; roughness: 0"
          ></a-sphere>

          <a-sphere
            position="0.3 0.24 0.1"
            radius="0.03"
            color="#8B5A9D"
            material="shader: flat; metalness: 1; roughness: 0"
          ></a-sphere>

          <a-sphere
            position="-0.3 0.24 0.1"
            radius="0.03"
            color="#4CA3A3"
            material="shader: flat; metalness: 1; roughness: 0"
          ></a-sphere>

          <a-sphere
            position="0.2 0.24 -0.25"
            radius="0.03"
            color="#F4C542"
            material="shader: flat; metalness: 1; roughness: 0"
          ></a-sphere>

          <a-sphere
            position="-0.2 0.24 -0.25"
            radius="0.03"
            color="#EC5B7E"
            material="shader: flat; metalness: 1; roughness: 0"
          ></a-sphere>
        </a-entity>

        <!-- OREJAS DE CONEJO BLANCO -->
        <a-entity position="0 0.15 -0.1" scale="1.4 1.4 1.4">
          <!-- Oreja izquierda -->
          <a-entity position="-0.25 0.15 0" rotation="0 0 -20">
            <a-cylinder
              radius="0.04"
              height="0.35"
              color="#FFFFFF"
              material="shader: flat"
              rotation="0 0 0"
            ></a-cylinder>

            <a-sphere
              position="0 0.18 0"
              radius="0.05"
              color="#FFFFFF"
              material="shader: flat"
            ></a-sphere>

            <!-- Interior rosa -->
            <a-cylinder
              radius="0.025"
              height="0.25"
              color="#FFB6C1"
              material="shader: flat"
              rotation="0 0 0"
            ></a-cylinder>
          </a-entity>

          <!-- Oreja derecha -->
          <a-entity position="0.25 0.15 0" rotation="0 0 20">
            <a-cylinder
              radius="0.04"
              height="0.35"
              color="#FFFFFF"
              material="shader: flat"
              rotation="0 0 0"
            ></a-cylinder>

            <a-sphere
              position="0 0.18 0"
              radius="0.05"
              color="#FFFFFF"
              material="shader: flat"
            ></a-sphere>

            <!-- Interior rosa -->
            <a-cylinder
              radius="0.025"
              height="0.25"
              color="#FFB6C1"
              material="shader: flat"
              rotation="0 0 0"
            ></a-cylinder>
          </a-entity>
        </a-entity>

        <!-- NARIZ DE CONEJO -->
        <a-entity position="0 -0.25 0.35" scale="1.2 1.2 1.2">
          <a-sphere radius="0.06" color="#FFB6C1" material="shader: flat">
            <a-sphere
              position="0.02 0.02 0.02"
              radius="0.015"
              color="#FFFFFF"
              material="shader: flat; opacity: 0.9"
            ></a-sphere>
          </a-sphere>
        </a-entity>

        <!-- CARTAS FLOTANTES (Naipes) -->
        <!-- Carta Corazón (izquierda) -->
        <a-entity position="-0.45 -0.2 0.1" rotation="0 20 -15" scale="0.8 0.8 0.8">
          <a-box
            width="0.15"
            height="0.22"
            depth="0.01"
            color="#FFFFFF"
            material="shader: flat"
          ></a-box>

          <a-text
            value="♥"
            color="#EC5B7E"
            align="center"
            width="0.6"
            position="0 0 0.006"
          ></a-text>
        </a-entity>

        <!-- Carta Trébol (derecha) -->
        <a-entity position="0.45 -0.2 0.1" rotation="0 -20 15" scale="0.8 0.8 0.8">
          <a-box
            width="0.15"
            height="0.22"
            depth="0.01"
            color="#FFFFFF"
            material="shader: flat"
          ></a-box>

          <a-text
            value="♣"
            color="#1a0f2e"
            align="center"
            width="0.6"
            position="0 0 0.006"
          ></a-text>
        </a-entity>

        <!-- ROSA ROJA (Queen of Hearts) -->
        <a-entity position="0 -0.45 0.2" scale="1.3 1.3 1.3">
          <!-- Pétalos -->
          <a-sphere
            radius="0.08"
            color="#D14563"
            material="shader: flat"
            scale="1 0.8 1"
          ></a-sphere>

          <a-sphere
            position="0.05 0 0.05"
            radius="0.06"
            color="#EC5B7E"
            material="shader: flat"
            scale="1 0.8 1"
          ></a-sphere>

          <a-sphere
            position="-0.05 0 0.05"
            radius="0.06"
            color="#EC5B7E"
            material="shader: flat"
            scale="1 0.8 1"
          ></a-sphere>

          <!-- Centro -->
          <a-sphere
            position="0 0 0.08"
            radius="0.025"
            color="#FFD700"
            material="shader: flat"
          ></a-sphere>
        </a-entity>

        <!-- SÍMBOLOS MÁGICOS FLOTANTES -->
        <!-- Estrella izquierda superior -->
        <a-octahedron
          position="-0.4 0.2 0"
          radius="0.05"
          color="#F4C542"
          material="shader: flat; metalness: 0.8"
        ></a-octahedron>

        <!-- Estrella derecha superior -->
        <a-octahedron
          position="0.4 0.2 0"
          radius="0.05"
          color="#FFD700"
          material="shader: flat; metalness: 0.8"
        ></a-octahedron>

        <!-- Diamante izquierda -->
        <a-entity position="-0.35 -0.05 0.05" rotation="0 0 45">
          <a-box
            width="0.06"
            height="0.06"
            depth="0.01"
            color="#8B5A9D"
            material="shader: flat; metalness: 0.9"
          ></a-box>
        </a-entity>

        <!-- Diamante derecha -->
        <a-entity position="0.35 -0.05 0.05" rotation="0 0 45">
          <a-box
            width="0.06"
            height="0.06"
            depth="0.01"
            color="#4CA3A3"
            material="shader: flat; metalness: 0.9"
          ></a-box>
        </a-entity>

        <!-- Partículas brillantes -->
        <a-sphere
          position="0.3 0.35 0.1"
          radius="0.02"
          color="#FFF8DC"
          material="shader: flat; opacity: 0.8"
        ></a-sphere>
        <a-sphere
          position="-0.3 0.35 0.1"
          radius="0.02"
          color="#FFF8DC"
          material="shader: flat; opacity: 0.8"
        ></a-sphere>
        <a-sphere
          position="0.25 -0.35 0.1"
          radius="0.015"
          color="#FFD700"
          material="shader: flat; opacity: 0.7"
        ></a-sphere>
        <a-sphere
          position="-0.25 -0.35 0.1"
          radius="0.015"
          color="#FFD700"
          material="shader: flat; opacity: 0.7"
        ></a-sphere>
      </a-entity>

      <!-- ILUMINACIÓN -->
      <a-light type="ambient" intensity="1.5" color="#FFF"></a-light>
      <a-light type="directional" intensity="1" position="0 1 1" color="#FFF"></a-light>
      <a-light type="point" intensity="0.5" position="0 0 1" color="#F4C542"></a-light>
    </a-scene>

    <script src="js/app.js"></script>
  </body>
</html>
